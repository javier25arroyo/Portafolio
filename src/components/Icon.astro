---
interface Props {
  name: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  class?: string;
  color?: string;
}

const { name, size = 'md', class: className = '', color } = Astro.props;

const sizes = {
  sm: 'w-4 h-4',
  md: 'w-6 h-6', 
  lg: 'w-8 h-8',
  xl: 'w-12 h-12'
};

const iconClasses = `${sizes[size]} ${className}`;

// Mapeo de iconos disponibles
const iconMap: Record<string, string> = {
  // Tech skills icons
  'java': '/assets/icons/java.svg',
  'csharp': '/assets/icons/CSharp.svg',
  'html': '/assets/icons/HTML.svg',
  'css': '/assets/icons/CSS.svg',
  'javascript': '/assets/icons/JavaScript.svg',
  'typescript': '/assets/icons/TypeScript.svg',
  'nodejs': '/assets/icons/Node.js.svg',
  'angular': '/assets/icons/Angular.svg',
  'mysql': '/assets/icons/MySQL.svg',
  'sqlserver': '/assets/icons/SqlServer.svg',
  'oracle': '/assets/icons/Oracle.svg',
  'mongodb': '/assets/icons/MongoDB.svg',
  'git': '/assets/icons/GIT.svg',
  'azure': '/assets/icons/Azure.svg',
  'figma': '/assets/icons/Figma.svg',
  
  // Theme icons
  'light-mode': '/assets/icons/light_mode.svg',
  'dark-mode': '/assets/icons/dark_mode.svg',
  
  // Social media icons
  'whatsapp': '/assets/icons/whatsapp.svg'
};

// Importar din√°micamente el SVG
const iconPath = iconMap[name.toLowerCase()];
let iconContent = '';

if (iconPath) {
  try {
    // Para iconos SVG, necesitamos importarlos como raw
    const iconModule = await import(/* @vite-ignore */ `${iconPath}?raw`);
    iconContent = iconModule.default;
  } catch (error) {
    console.warn(`Icon ${name} not found at ${iconPath}`);
  }
}
---

{iconContent ? (
  <div 
    class={iconClasses} 
    style={color ? `color: ${color}` : ''}
    set:html={iconContent}
  />
) : (
  <!-- Fallback si el icono no se encuentra -->
  <div class={`${iconClasses} bg-slate-300 dark:bg-slate-600 rounded flex items-center justify-center text-xs text-slate-600 dark:text-slate-300`}>
    {name.charAt(0).toUpperCase()}
  </div>
)}